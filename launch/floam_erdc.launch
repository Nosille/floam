<?xml version="1.0"?>
<launch>
    
    
    <remap from="/odom" to="/odom_floam" />
    <param name="map_resolution" type="double" value="0.2" />

    <!-- For vlp-16 -->
    <!-- <param name="scan_period" value="0.10" />
    <param name="vertical_angle" type="double" value="2.0" />
    <param name="max_dis" type="double" value="90.0" />
    <param name="min_dis" type="double" value="2.0" />
    <param name="scan_line" value="16" />

     <remap from="velodyne_points" to="/lidar/vl_points_0" />
    <remap from="/velodyne_points_filtered" to="/lidar/vl_points_0/filtered" />
    <remap from="/laser_cloud_edge" to="/lidar/vl_points_0/laser_cloud_edge" />
    <remap from="/laser_cloud_surf" to="/lidar/vl_points_0/laser_cloud_surf" /> -->
    
    <!-- For OS0-64 -->
    <param name="scan_period" value="0.050" />
    <param name="vertical_angle" type="double" value="1.43" />
    <param name="max_dis" type="double" value="90.0" />
    <param name="min_dis" type="double" value="5.0" />
    <param name="scan_line" value="64" />

    <remap from="velodyne_points" to="/lidar/ouster_top/points" />
    <remap from="/velodyne_points_filtered" to="/lidar/ouster_top/points/filtered" />
    <remap from="/laser_cloud_edge" to="/lidar/ouster_top/points/laser_cloud_edge" />
    <remap from="/laser_cloud_surf" to="/lidar/ouster_top/points/laser_cloud_surf" />

    <!--- initial processing -->
    <node pkg="floam" type="floam_laser_processing_node" name="floam_laser_processing_node" output="screen"/>
    <node pkg="floam" type="floam_odom_estimation_node" name="floam_odom_estimation_node" output="screen"/>
    <!-- <node pkg="floam" type="floam_laser_mapping_node" name="floam_laser_mapping_node" output="screen"/> -->

    <!-- <node pkg="tf" type="static_transform_publisher" name="word2map_tf"  args="0 0 0 0 0 0 /world /map 10" /> -->
    
    <!-- <arg name="rviz" default="true" />
    <group if="$(arg rviz)">
        <node launch-prefix="nice" pkg="rviz" type="rviz" name="rviz" args="-d $(find floam)/rviz/floam_mapping.rviz" />
    </group> -->

    
  	<!-- <node pkg="hector_trajectory_server" type="hector_trajectory_server" name="trajectory_server_loam" ns="gt" >
        <param name="/target_frame_name" value="map" />
        <param name="/source_frame_name" value="sensor_fusion_focal" />
        <param name="/trajectory_update_rate" value="10.0" />
        <param name="/trajectory_publish_rate" value="10.0" />
    </node> -->
    <!-- <node pkg="hector_trajectory_server" type="hector_trajectory_server" name="trajectory_server_loam" ns="base_link" >
        <param name="/target_frame_name" value="map_floam" />
        <param name="/source_frame_name" value="base_footprint" />
        <param name="/trajectory_update_rate" value="10.0" />
        <param name="/trajectory_publish_rate" value="10.0" />
    </node> -->


    <group ns="transform_odometry">
        <node name="transform_floam" type="transform_odometry_node" pkg="transform_odometry" output="screen">
          <param name="odom_topic"            type="string"   value="/odom_floam" />
          <param name="odom_sensor_topic"     type="string"   value="/odom_floam/sensor" />
          <param name="odom_out_topic"        type="string"   value="/oodm_floam/transformed" />

          <param name="odom_frame_id"         type="string"   value="odom" />
          <param name="base_link_id"          type="string"   value="base_footprint" />
        </node>
    </group>

</launch>
